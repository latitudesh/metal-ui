"use strict";var _rollupPluginBabelHelpers=require("../_virtual/_rollupPluginBabelHelpers.js"),React=require("react"),index=require("../Input/index.js"),PropTypes=require("prop-types"),react=require("@emotion/react");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var PropTypes__default=_interopDefaultLegacy(PropTypes);function Editable({value:r="",onSave:l,title:e,className:t="",...u}){const n=React.useRef(),a=React.useRef(),o=React.useRef(!1),[i,s]=React.useState(r),d=React.useCallback(async()=>{var e,t;null!==n&&void 0!==n&&null!=(e=n.current)&&null!=(e=e.validity)&&e.valid?(o.current=!1,i!==r&&(null!==a&&void 0!==a&&null!=(e=a.current)&&e.focus(),await(null==l?void 0:l(i))||s(r))):null!==n&&void 0!==n&&null!=(e=n.current)&&null!=(t=e.reportValidity)&&t.call(e)},[l,i,r,null===n||void 0===n?void 0:n.current]);return react.jsx("div",{className:"focus:outline-none border border-transparent rounded focus:border-border "+t,tabIndex:0,ref:a,onKeyDown:e=>{"Enter"===e.key&&null!==n&&void 0!==n&&null!=(e=n.current)&&e.focus()}},react.jsx(index,_rollupPluginBabelHelpers.extends({},u,{variant:"text-editable",tabIndex:-1,style:{maxWidth:"100%",textOverflow:"ellipsis",overflow:"hidden"},title:e,ref:n,type:"text",value:i,onBlur:()=>{o.current&&d()},onFocus:()=>{o.current=!0},onKeyDown:e=>{e.stopPropagation(),"Enter"===e.key&&d(),"Escape"===e.key&&(s(r),o.current=!1,null!==a&&void 0!==a&&null!=(e=a.current)&&e.focus())},onChange:s})))}Editable.propTypes={value:PropTypes__default.default.string,onSave:PropTypes__default.default.func,title:PropTypes__default.default.string,className:PropTypes__default.default.string},module.exports=Editable;
